"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("ethers"),t=require("ethers/utils"),n=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"string",name:"protocolName",type:"string"},{internalType:"address[]",name:"adapters",type:"address[]"},{internalType:"address[][]",name:"tokens",type:"address[][]"}],name:"addProtocolAdapters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"protocolNames",type:"string[]"},{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"websiteURL",type:"string"},{internalType:"string",name:"iconURL",type:"string"},{internalType:"uint256",name:"version",type:"uint256"}],internalType:"struct ProtocolMetadata[]",name:"metadata",type:"tuple[]"},{internalType:"address[][]",name:"adapters",type:"address[][]"},{internalType:"address[][][]",name:"tokens",type:"address[][][]"}],name:"addProtocols",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"tokenAdapterNames",type:"string[]"},{internalType:"address[]",name:"adapters",type:"address[]"}],name:"addTokenAdapters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"adapter",type:"address"},{internalType:"address[]",name:"tokens",type:"address[]"}],name:"getAdapterBalance",outputs:[{components:[{components:[{internalType:"address",name:"adapterAddress",type:"address"},{internalType:"string",name:"adapterType",type:"string"}],internalType:"struct AdapterMetadata",name:"metadata",type:"tuple"},{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance[]",name:"balances",type:"tuple[]"}],internalType:"struct AdapterBalance",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address[]",name:"adapters",type:"address[]"}],name:"getAdapterBalances",outputs:[{components:[{components:[{internalType:"address",name:"adapterAddress",type:"address"},{internalType:"string",name:"adapterType",type:"string"}],internalType:"struct AdapterMetadata",name:"metadata",type:"tuple"},{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance[]",name:"balances",type:"tuple[]"}],internalType:"struct AdapterBalance[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"getBalances",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"websiteURL",type:"string"},{internalType:"string",name:"iconURL",type:"string"},{internalType:"uint256",name:"version",type:"uint256"}],internalType:"struct ProtocolMetadata",name:"metadata",type:"tuple"},{components:[{components:[{internalType:"address",name:"adapterAddress",type:"address"},{internalType:"string",name:"adapterType",type:"string"}],internalType:"struct AdapterMetadata",name:"metadata",type:"tuple"},{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance[]",name:"balances",type:"tuple[]"}],internalType:"struct AdapterBalance[]",name:"adapterBalances",type:"tuple[]"}],internalType:"struct ProtocolBalance[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"tokenType",type:"string"},{internalType:"address",name:"token",type:"address"}],name:"getFinalFullTokenBalance",outputs:[{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"tokenType",type:"string"},{internalType:"address",name:"token",type:"address"}],name:"getFullTokenBalance",outputs:[{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"}],name:"getProtocolAdapters",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"string[]",name:"protocolNames",type:"string[]"}],name:"getProtocolBalances",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"websiteURL",type:"string"},{internalType:"string",name:"iconURL",type:"string"},{internalType:"uint256",name:"version",type:"uint256"}],internalType:"struct ProtocolMetadata",name:"metadata",type:"tuple"},{components:[{components:[{internalType:"address",name:"adapterAddress",type:"address"},{internalType:"string",name:"adapterType",type:"string"}],internalType:"struct AdapterMetadata",name:"metadata",type:"tuple"},{components:[{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance",name:"base",type:"tuple"},{components:[{components:[{internalType:"address",name:"token",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"}],internalType:"struct TokenMetadata",name:"metadata",type:"tuple"},{internalType:"uint256",name:"amount",type:"uint256"}],internalType:"struct TokenBalance[]",name:"underlying",type:"tuple[]"}],internalType:"struct FullTokenBalance[]",name:"balances",type:"tuple[]"}],internalType:"struct AdapterBalance[]",name:"adapterBalances",type:"tuple[]"}],internalType:"struct ProtocolBalance[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"}],name:"getProtocolMetadata",outputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"websiteURL",type:"string"},{internalType:"string",name:"iconURL",type:"string"},{internalType:"uint256",name:"version",type:"uint256"}],internalType:"struct ProtocolMetadata",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getProtocolNames",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"adapter",type:"address"}],name:"getSupportedTokens",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"tokenAdapterName",type:"string"}],name:"getTokenAdapter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokenAdapterNames",outputs:[{internalType:"string[]",name:"",type:"string[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"}],name:"isValidProtocol",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"tokenAdapterName",type:"string"}],name:"isValidTokenAdapter",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"},{internalType:"uint256[]",name:"adapterIndices",type:"uint256[]"}],name:"removeProtocolAdapters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"protocolNames",type:"string[]"}],name:"removeProtocols",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string[]",name:"tokenAdapterNames",type:"string[]"}],name:"removeTokenAdapters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"},{internalType:"uint256",name:"index",type:"uint256"},{internalType:"address",name:"newAdapterAddress",type:"address"},{internalType:"address[]",name:"newSupportedTokens",type:"address[]"}],name:"updateProtocolAdapter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"protocolName",type:"string"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"description",type:"string"},{internalType:"string",name:"websiteURL",type:"string"},{internalType:"string",name:"iconURL",type:"string"}],name:"updateProtocolMetadata",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"tokenAdapterName",type:"string"},{internalType:"address",name:"adapter",type:"address"}],name:"updateTokenAdapter",outputs:[],stateMutability:"nonpayable",type:"function"}],a=function(e,t){this.metadata=t,this.balances=e},r=function(e,t,n,a,r){this.name=e,this.description=t,this.website=new URL("https://"+n),this.logo=new URL("https://"+a),this.version=BigInt(r.toNumber())},i=function(e,t){this.metadata=t,this.balances=e},p=function(e,t){this.address=e,this.type=t},s=function(e,t){this.base=e,this.underlying=t},o=function(){function e(e,t){this.balance=e,this.metadata=t}return e.prototype.getAmount=function(){return new t.BigNumber(this.balance.toString()).div(new t.BigNumber(10).pow(this.metadata.decimals.toString()))},e}(),y=function(e,t,n,a){this.address=e,this.decimals=t,this.name=n,this.symbol=a},l=function(){function e(){}var t=e.prototype;return t.protocolBalance=function(e){var t=this;return new a(e.adapterBalances.map((function(e){return t.adapterBalance(e)})),this.protocolMetadata(e.metadata))},t.adapterBalance=function(e){var t=this;return new i(e.balances.map((function(e){return t.assetBalance(e)})),this.adapterMetadata(e.metadata))},t.protocolMetadata=function(e){return new r(e.name,e.description,e.websiteURL,e.iconURL,e.version)},t.adapterMetadata=function(e){return new p(e.adapterAddress,e.adapterType)},t.assetBalance=function(e){var t=this;return new s(this.tokenBalance(e.base),e.underlying.map((function(e){return t.tokenBalance(e)})))},t.tokenBalance=function(e){return new o(e.amount.toString(),this.tokenMetadata(e.metadata))},t.tokenMetadata=function(e){return new y(e.token,e.decimals,e.name,e.symbol)},e}();function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,n){return(c=d()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&m(r,n.prototype),r}).apply(null,arguments)}function T(e){var t="function"==typeof Map?new Map:void 0;return(T=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)})(e)}var g=function(e){var t,n;function a(t){var n;return(n=e.call(this,"Protocol ["+t+"] does not exists")||this).name="ProtocolDoesNotExistError",n.protocol=t,n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(T(Error));exports.DeFiSDK=function(){function t(t){this.adapterRegistry=new e.ethers.Contract("0x06FE76B2f432fdfEcAEf1a7d4f6C3d41B5861672",n,new e.ethers.providers.JsonRpcProvider(new URL(t).toString())),this.builder=new l}var a=t.prototype;return a.getProtocolNames=function(){return this.adapterRegistry.getProtocolNames()},a.getProtocolMetaData=function(e){var t=this;return this.adapterRegistry.getProtocolMetadata(e).then((function(e){return t.builder.protocolMetadata(e)}))},a.getTokenAdapterNames=function(){return this.adapterRegistry.getTokenAdapterNames()},a.getProtocolBalance=function(e,t){return this.getProtocolBalances(e,[t]).then((function(e){if(0===e.length)throw new g(t);if(e.length>1)throw new RangeError("More than 1 protocol found.");return e[0]}))},a.getProtocolBalances=function(e,t){var n=this;return this.adapterRegistry.getProtocolBalances(e,t).then((function(e){return e.map((function(e){return n.builder.protocolBalance(e)}))}))},a.getAccountBalances=function(e){var t=this;return this.adapterRegistry.getBalances(e).then((function(e){return e.map((function(e){return t.builder.protocolBalance(e)}))}))},a.getTokenComponents=function(e,t){var n=this;return this.adapterRegistry.getFinalFullTokenBalance(e,t).then((function(e){return n.builder.assetBalance(e)}))},t}(),exports.Protocols={ZRX_STAKING:"0x Staking",AAVE:"Aave",BALANCER:"Balancer",BANCOR:"Bancor",CHAI:"Chai",COMPOUND:"Compound",CURVE:"Curve",DSR:"Dai Savings Rate",DMM:"DeFi Money Market",DYDX:"dYdX",IDLE:"Idle",IEARN_V2:"iearn.finance (v2)",IEARN_V3:"iearn.finance (v3)",MCD:"Multi-Collateral Dai",PIEDAO:"PieDAO",POOLTOGETHER:"PoolTogether",SYNTHETIX:"Synthetix",TOKENSETS:"TokenSets",UNISWAP_V1:"Uniswap V1",UNISWAP_V2:"Uniswap V2"},exports.TokenAdapters={AAVE:"AToken",BALANCER:"Balancer pool token",CHAI:"Chai token",COMPOUND:"CToken",CURVE:"Curve pool token",ERC20:"ERC20",IDLE:"IdleToken",DMM:"MToken",PIEDAO:"PieDAO Pie Token",POOLTOGETHER:"PoolTogether pool",TOKENSETS:"SetToken",BANCOR:"SmartToken",UNISWAP_V1:"Uniswap V1 pool token",UNISWAP_V2:"Uniswap V2 pool token",IEARN:"YToken"};
//# sourceMappingURL=defi-sdk.cjs.production.min.js.map
